define("interface-widget-1:vipWarn/context.js",function(t,n,e){var o={context:null},c={mix:{"超级会员到期提醒":{logType:"count",description:"到期提醒"}}};e.exports={getContext:function(){return o.context},setContext:function(t){o.context||(o.context=t,t&&t.log&&t.log.define(c))}}});
;define("interface-widget-1:vipWarn/vipWarn.js",function(e,t,i){var n=e("base:widget/storage/storage.js"),a=e("interface-widget-1:vipWarn/context.js").getContext,o=e("base:widget/libs/jquerypacket.js"),r=e("base:widget/libs/underscore.js"),s=window.yunData,d={capacity:'div[node-type~="pjzwP5Zw"]',overdueLink:'a[node-type="LuwQyJb"]',tips:'div[node-type="EsbcNG"]',tipClose:"i.overdue-close"},l={getTpl:function(e){var t;t=s.ISSVIP?'<em class="overdue-icon overdue-icon-svip" node-type="sAcfbA"></em>':s.ISVIP?'<em class="overdue-icon overdue-icon-vip" node-type="sAcfbA"></em>':'<em class="overdue-icon overdue-icon-novip" node-type="sAcfbA"></em>';var i=['<div node-type="EsbcNG" class="g-clearfix EsbcNG"><div class="overdue-warp">',t,'<span class="HEIExKb"><%= title %></span>','<i class="overdue-close">×</i>',"</div><p>",'<span node-type="dseEcv" class="overdue-extra"><%= notice %></span>','<a node-type="LuwQyJb" href="javascript:void(0)" class="yQzHsOb"><%= statusText %></a></p>','<em class="bottom-tip"></em>',"</div>"];return r.template(i.join(""))(e)},toPayVip:function(e,t){var i=!!l.wholeData.svip;e||(e=i?"svip":"vip"),t||(t="reminder"+(i?"1":"0")),"svip"===e?window.open("/buy/checkoutcounter?svip=1&fromparams="+t,"_blank"):window.open("/buy/checkoutcounter?fromparams="+t,"_blank"),window.operationADUnderCrown(e+"_"+t)},bindStatistics:function(){var e=o.Callbacks();e.add(function(e){a().log.send({name:"超级会员到期提醒",value:e})}),window.operationADUnderCrown=function(t){if(null===this||!t)throw new Error("are you kidding me?");e.fire(t)}},isShowQuota:function(e,t){var i=l.wholeData;return"svip"in i&&null!==l.reminderData?(i=i.svip,e=parseFloat(e),t=parseFloat(t),e>t-3e3&&"nextState"in i&&i.leftseconds<432e3?i.leftseconds<86400?"today":"already":!1):!1},init:function(){var e=o.Callbacks();e.add(function(e){l.wholeData=e,l.isCallbacksCalled=!0;var t=e.reminderWithContent;r.isObject(t)&&t.title&&t.notice?(/过期/.test(t.title)?(t.statusText="立即开通",c.setStateText(c.stateTextList.EXPIRED)):(t.statusText="续费",c.setStateText(c.stateTextList.UNEXPIRED),c.showGuideOfRecyclebin(function(){l.renderDataToPage()})),l.reminderData=t):l.renderDataToPage()}),window.superMemberTip=function(t){if(null===this||!t)throw new Error("are you kidding me?");e.fire(t)};var t=o.Callbacks();t.add(function(e,t){l.toPayVip(e,t)}),window.callMemberFeeWindow=function(e,i){t.fire(e,i)};var i={isQuota:!0,title:"超级会员即将到期",notice:"超级会员到期后容量将降至2T，续费超级会员，留住5T容量特权",statusText:"续费"};l.quotaTipTpl={already:l.getTpl(i)},i.title="超级会员今日到期",l.quotaTipTpl.today=l.getTpl(i),l.bindStatistics()},reminderData:null,wholeData:null,isCallbacksCalled:!1,isOuterCalled:!1,container:null,renderDataToPage:function(){if(this.isCallbacksCalled&&this.isOuterCalled){var e=this.container,t=this;null===l.reminderData&&a().message.callPlugin("网盘容量@com.baidu.pan",{showType:"showQuotaTip"});var i=function(){var a,r;if(s&&s.QUOTAINFOS&&(a=s.QUOTAINFOS.total,r=s.QUOTAINFOS.used),a&&r){var c="",p=0,u=l.isShowQuota(a,r);if(u)c="already"===u?l.quotaTipTpl.already:l.quotaTipTpl.today,p=30,window.operationADUnderCrown("quotaBubbleTip");else{if(!t.reminderData)return;c=t.getTpl(t.reminderData),p=l.reminderData.notice.length,window.operationADUnderCrown("permanentExpiredTip")}e.append(c),l.container.find(d.overdueLink).on("click",function(){l.toPayVip(null,null);var e="clickInPermanentExpiredTip";u&&(e="clickAddInQuotaTip"),window.operationADUnderCrown(e),n.setItem("closeExpiredTip",!0)}),l.container.find(d.tipClose).on("click",function(){o(this).closest(".EsbcNG").hide(),o(".recyclebin-tip").hide(),n.setItem("closeExpiredTip",!0)})}else setTimeout(function(){i()},300)};n.getItem("closeExpiredTip")||i()}}};l.init();var c={body:o(document.body),stateText:"",stateTextList:{UNEXPIRED:"您有文件将过期被删",EXPIRED:"您有文件今日过期被删"},setStateText:function(e){this.stateText=e},showGuideOfRecyclebin:function(e){o.ajax({url:"/api/recycle/list",type:"get",cache:!0,dataType:"json",success:function(t){t&&0===t.errno&&t.list.length>0?c.show():e()}})},show:function(){n.getItem("closeExpiredTip")||o('<div class="recyclebin-tip">'+this.stateText+"</div>").appendTo(this.body)}};i.exports=function(e){e||(e={});var t=e.$container;t&&t.length&&(l.isOuterCalled=!0,l.container=t,l.renderDataToPage())}});
;define("interface-widget-1:vipWarn/start.js",function(t,e,n){var i=t("interface-widget-1:vipWarn/context.js"),r=t("interface-widget-1:vipWarn/vipWarn.js");n.exports.start=function(t,e){i.setContext(t),r(e)}});