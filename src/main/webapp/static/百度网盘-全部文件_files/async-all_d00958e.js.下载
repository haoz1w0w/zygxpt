define("system-core:system/uiService/rMenu/rMenu.js",function(e,t,n){var i=e("base:widget/libs/underscore.js"),o=e("base:widget/libs/jquerypacket.js"),a={domConf:{},eventConf:{},menus:{},keyBoard:{},currentShowId:void 0,currentMenuTarget:null,tempHtml:"",tempForCurrentRenderId:void 0,subMenuShowTime:200,subMenuLoad:null,zIndex:100,onMenuHide:null},l=function(e,t,n,i){var o=function(e){void 0===e&&(e=window.event),void 0===e.stopPropagation&&(e.stopPropagation=function(){e.cancelBubble=!0}),void 0===e.preventDefault&&(e.preventDefault=function(){e.returnValue=!1}),n(e)};e.addEventListener?e.addEventListener(t,o,!!i):e.attachEvent?e.attachEvent("on"+t,o):e["on"+t]=o};a.contextMenu=function(e,t,n,i){if(e=e||window.event,a.currentMenuTarget=e.target||e.srcElement,a.eventConf=i,!i||"function"!=typeof i.beforeMenu||i.beforeMenu.call(a.currentMenuTarget)!==!1){e.cancelBubble=!0,e.stopPropagation&&e.stopPropagation();var o=n.getAttribute("data-cid");o||(o=a.getRandomId(),n.setAttribute("data-cid",o)),a.domConf[o]||(a.tempForCurrentRenderId=o,a.domConf[o]=a.createMenu(t,o)),a.checkDisplay(a.domConf[o]),a.caculatePosition(e,a.domConf[o]),a.showMenu(o),i&&"function"==typeof i.afterMenu&&i.afterMenu.call(a.currentMenuTarget),i&&"function"==typeof i.menuHide&&(a.onMenuHide=i.menuHide)}},a.getRandomId=function(e){return(e||"m")+Math.random().toString().replace(".","")},a.renderOneList=function(e,t){if(!e||!e.title)return"";e.id=a.getRandomId("i"),a.menus[e.id]=e;var n="",i="[object Array]"===Object.prototype.toString.call(e.nextMenu)&&e.nextMenu.length?' class="has-more arrowicon"':"",o="function"==typeof e.display?' data-check-display="true"':"";if("function"==typeof e.variableMenu&&(i=' class="has-more arrowicon" data-variable-menu="true"'),n+='<li id="'+e.id+'"'+i+o+' data-group="'+t+'">',"string"==typeof e.icon&&e.icon.length)n+=/background:url\(/.test(e.icon)?'<em class="icon" style=\''+e.icon+"'></em><em class=\"icon-hover\" style='"+e.icon+"'></em>":'<em class="icon '+e.icon+'"></em><em class="icon-hover '+e.icon+'"></em>';else if("object"==typeof e.icon&&e.icon.length)try{for(var l=0;l<e.icon.length;l++){var r=0===l?"icon":"icon-hover";n+=/background:url\(/.test(e.icon[l])?'<em class="'+r+"\" style='"+e.icon[l]+"'></em>":'<em class="'+r+" "+e.icon[l]+'"></em>'}}catch(c){}if(n+=e.title,e.keyboard&&1===e.keyboard.length){var s=e.keyboard.toUpperCase();a.keyBoard[a.tempForCurrentRenderId]||(a.keyBoard[a.tempForCurrentRenderId]={}),a.keyBoard[a.tempForCurrentRenderId][s]||(n+="("+s+")",a.keyBoard[a.tempForCurrentRenderId][s]=e.id)}return""!==i&&(n+=a.renderHtml(e.nextMenu)),n+="</li>"},a.renderHtml=function(e,t){var n="",o=/"separate" data-group="\d+"><\/li>$/;if(i.isArray(e)){t||(n+='<ul class="list">');var l=0;i.each(e,function(e){i.isArray(e)?e.length?(n.match(o)||(n+='<li class="separate" data-group="'+l++ +'"></li>'),i.each(e,function(e){n+=a.renderOneList(e,l)}),n+='<li class="separate" data-group="'+l++ +'"></li>'):0===e.length&&(n.match(o)||(n+='<li class="separate" data-group="'+l++ +'"></li>')):n+=a.renderOneList(e,l)}),n=n.replace(/<li\sclass="separate" data-group="\d+"><\/li>$/i,""),n=n.replace(/^<li\sclass="separate" data-group="\d+"><\/li>/i,""),t||(n+="</ul>")}else n+='<ul class="list"></ul>';return n},a.createMenu=function(e){var t=document.createElement("div");return t.className="context-menu",t.id=a.tempForCurrentRenderId,document.body.appendChild(t),a.tempHtml="",t.innerHTML=a.renderHtml(e),a.eventDelegate(t,".has-more","mouseover",a.showSubList),a.eventDelegate(t,".has-more","mouseout",a.hideSubList),a.eventDelegate(t,"li","mouseover",a.hideSilibingsList),a.eventDelegate(t,"li","click",a.listAction),a.eventDelegate(t,".list","click",a.variableMenuAction),a.eventDelegate(t,".list","mouseover",function(e){e.stopPropagation()}),t.children[0].style.zIndex=a.zIndex,l(t,"contextmenu",function(e){e.stopPropagation(),e.preventDefault()}),l(t,"click",function(e){e.stopPropagation()}),l(t,"mouseover",function(e){e.stopPropagation()}),l(t,"mouseout",function(e){e.stopPropagation()}),l(t,"mousedown",function(e){e.stopPropagation()}),l(t,"mouseup",function(e){e.stopPropagation()}),t.children[0]},a.asyncRenderSubList=function(e,t){"object"==typeof e&&e.length&&(t.innerHTML=a.renderHtml(e,!0)),a.checkDisplay(t)},a.showSubList=function(e){clearTimeout(a.subMenuLoad);var t=this;this.className.match(/\sdisable(\s|$)/)||(a.subMenuLoad=setTimeout(function(){if("true"===t.getAttribute("data-variable-menu")){var n=t.id,i=a.menus[n].variableMenu(t.children[0],function(e){a.asyncRenderSubList(e,t.children[0])});a.asyncRenderSubList(i,t.children[0])}t.className.match(/\sopen(\s|$)/)||(t.className=t.className+" open",t.style.zIndex=a.zIndex+3,a.checkDisplay(t.children[0]),a.caculatePosition(e,t.children[0],t))},a.subMenuShowTime))},a.hideSilibingsList=function(){var e;e=this===a?a.domConf[a.currentShowId].children:this.parentElement.children;for(var t,n=0,i=e.length;i>n;n++)t=e[n],t!==this&&t.className.match(/\sopen(\s|$)/)&&(t.className=t.className.replace(/\s+open(\s|$|\"|\')/g,"$1"),t.style.zIndex=a.zIndex+2,t.children[0].style.display="none",t.children[0].innerHTML=t.children[0].innerHTML.replace(/\s+open(\s|$|\"|\')/g,"$1").replace(/display\s*\:\s*block\s*;?/g,"display:none;"))},a.listAction=function(){if(this.id&&a.menus[this.id]){var e=document.getElementById(this.id);if(e.className.match(/\sdisable(\s|$)/))return;e.className.match(/(^|\s)has\-more(\s|$)/)||a.hideMenu(),"function"==typeof a.menus[this.id].action&&(a.eventConf&&"function"==typeof a.eventConf.listItemClickBefore&&a.eventConf.listItemClickBefore.call(a.currentMenuTarget,a.menus[this.id],"click"),a.menus[this.id].action.call(a.currentMenuTarget,e))}},a.variableMenuAction=function(){"true"===this.parentNode.getAttribute("data-variable-menu")&&a.hideMenu()},a.hideSubList=function(){clearTimeout(a.subMenuLoad)},a.showMenu=function(e){a.currentShowId&&(a.domConf[e].style.display="none"),a.domConf[e].style.display="block";var t=o(a.domConf[e]).find(">li:visible").length;0>=t&&(a.domConf[e].style.display="none"),a.currentShowId=e},a.checkDisplay=function(e){!e&&a.currentShowId&&(e=a.domConf[a.currentShowId]);for(var t,n=e.children,i=o(n[n.length-1]).data("group"),l=o(e).find('>li[data-group="0"]').length,r=o(e).find('>li[data-group="'+i+'"]').length,c=0,s=n.length;s>c;c++)if(t=n[c],"true"===t.getAttribute("data-check-display")){var u=t.id;if("function"==typeof a.menus[u].display){var d=o(t).data("group"),m=a.menus[u].display.call(a.currentMenuTarget);if(m!==!1){var p=a.getPreviousHidenSeparate(t);"disable"===m?(p&&(p.style.display="block"),-1===t.className.indexOf(" disable")&&(t.className=t.className+" disable"),t.style.display="block"):(1===d&&1>=l||p&&(p.style.display="block"),t.className=t.className.replace(/(\sdisable)+(?=\s|$)/gi,""),t.style.display="block")}else{var h=a.getPreviousVisibleSeparate(t),f=a.getNextVisibleSeparate(t);h&&f&&(h.style.display="none"),t.style.display="none",0===d&&--l<=1&&o(e).find('>li.separate[data-group="0"]').hide(),d===i&&--r<=1&&o(e).find('>li.separate[data-group="'+(i-1)+'"]').hide()}}}},a.getPreviousVisibleSeparate=function(e){for(var t=e.previousElementSibling||e.previousSibling;t;)if("none"===t.style.display)t=t.previousElementSibling||t.previousSibling;else{if("separate"===t.className)break;t=null}return t},a.getPreviousHidenSeparate=function(e){for(var t=e.previousElementSibling||e.previousSibling;t;)if("separate"===t.className){if("none"===t.style.display)break;t=null}else t="none"===t.style.display?t.previousElementSibling||t.previousSibling:null;return t},a.getNextVisibleSeparate=function(e){for(var t=e.nextElementSibling||e.nextSibling;t;)if("none"===t.style.display)t=t.nextElementSibling||t.nextSibling;else{if("separate"===t.className)break;t=null}return t},a.caculatePosition=function(e,t,n){var i=t.style.left,o=t.style.top;t.style.left="-9999px",t.style.top="-9999px",t.style.display="block";var a=t.offsetWidth,l=t.offsetHeight,r=document.documentElement.clientWidth,c=document.documentElement.clientHeight;if(n){var s=function(){for(var e=n,t=0;e;)t+=e.offsetTop,e=e.parentElement;return t}(),u=function(){for(var e=n,t=0;e;)t+=e.offsetLeft,e=e.parentElement;return t}(),d=n.offsetWidth,m=n.offsetHeight;o=c>=s+l?-3:s>l?l-2-m:s+l-c-3,i=r>=u+d+a?d-3:-a+3}else{var p=e.clientX,h=e.clientY;i=r>=p+a?p:r-a,o=c>=h+l?h:h>l?h-l:c-l}t.style.left=i+"px",t.style.top=o+"px"},a.hideMenu=function(){a.currentShowId&&(a.domConf[a.currentShowId].style.display="none",a.hideSilibingsList(),a.currentShowId=void 0,a.hideSubList(),"function"==typeof a.onMenuHide&&a.onMenuHide.call(a.currentMenuTarget))},a.keyBoardHandler=function(e){var t=String.fromCharCode(e.keyCode);if(a.currentShowId&&a.keyBoard[a.currentShowId]){var n=a.keyBoard[a.currentShowId][t];if(n){var i=document.getElementById(n);if(i.className.match(/\sdisable(\s|$)/))return;if(i.className.match(/(^|\s)has\-more(\s|$)/))return a.showSubList.call(i),void a.hideSilibingsList.call(i);"function"==typeof a.menus[n].action&&(a.hideMenu(),a.eventConf&&"function"==typeof a.eventConf.listItemClickBefore&&a.eventConf.listItemClickBefore.call(a.currentMenuTarget,a.menus[n],"keyBoard"),a.menus[n].action.call(a.currentMenuTarget,i))}}},a.eventMatcher=function(e,t,n,i){var o=e,a=!1;for(n.stopPropagation=function(){a=!0};o&&o!==i&&o!==document.body&&!a;){for(var l=0,r=t.length;r>l;l++){var c=t[l].selector;0===c.indexOf(".")&&-1!==o.className.toLowerCase().indexOf(c.substring(1))?t[l].action.call(o,n):-1!==o.tagName.toLowerCase().indexOf(c)&&t[l].action.call(o,n)}o=o.parentNode}},a.eventDelegate=function(e,t,n,i){e["delegateevent-"+n]?e["delegateevent-"+n].push({selector:t,action:i}):(e["delegateevent-"+n]=[{selector:t,action:i}],l(e,n,function(t){var i=t.target||t.srcElement,o=e["delegateevent-"+n];a.eventMatcher(i,o,t,e)}))},a.init=function(){var e='.context-menu{position:absolute;font-size:13px!important;color:#000!important;top:0;left:0;-moz-user-select:none;-o-user-select:none;-webkit-user-select:none;user-select:none}.context-menu .arrowicon{background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA0AAAAyCAMAAACwGaE2AAAABlBMVEV6enr///+4gAnsAAAAAnRSTlP/AOW3MEoAAAAZdEVYdFNvZnR3YXJlAEFkb2JlIEltYWdlUmVhZHlxyWU8AAADImlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS4zLWMwMTEgNjYuMTQ1NjYxLCAyMDEyLzAyLzA2LTE0OjU2OjI3ICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOnhtcE1NPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvbW0vIiB4bWxuczpzdFJlZj0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL3NUeXBlL1Jlc291cmNlUmVmIyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M2IChXaW5kb3dzKSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo3OEZDMDgxQjNGQ0UxMUU0QUU2REY5MEI4NTk2OTIxNyIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDo3OEZDMDgxQzNGQ0UxMUU0QUU2REY5MEI4NTk2OTIxNyI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjc4RkMwODE5M0ZDRTExRTRBRTZERjkwQjg1OTY5MjE3IiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjc4RkMwODFBM0ZDRTExRTRBRTZERjkwQjg1OTY5MjE3Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+lu+4FAAAAEZJREFUKM/d0kEKACAIRNHf/S8dSWoz4AVyo4/QRQwrircBLbgkEaRwSAOZc7nqC6FChYr5bb75xS9pCmS29FiyLHWWyGob38gCGXhjiW4AAAAASUVORK5CYII=) right center no-repeat}.context-menu .arrowicon.list-hover,.context-menu .arrowicon.open{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA0AAAAyCAMAAACwGaE2AAAABlBMVEX///////9VfPVsAAAAAnRSTlP/AOW3MEoAAAAZdEVYdFNvZnR3YXJlAEFkb2JlIEltYWdlUmVhZHlxyWU8AAADImlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS4zLWMwMTEgNjYuMTQ1NjYxLCAyMDEyLzAyLzA2LTE0OjU2OjI3ICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOnhtcE1NPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvbW0vIiB4bWxuczpzdFJlZj0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL3NUeXBlL1Jlc291cmNlUmVmIyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M2IChXaW5kb3dzKSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo4MDFBMUNGRjNGQ0UxMUU0OEJERUM0MjlEMTI1MzU1NSIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDo4MDFBMUQwMDNGQ0UxMUU0OEJERUM0MjlEMTI1MzU1NSI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjgwMUExQ0ZEM0ZDRTExRTQ4QkRFQzQyOUQxMjUzNTU1IiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjgwMUExQ0ZFM0ZDRTExRTQ4QkRFQzQyOUQxMjUzNTU1Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+VaFCGQAAAEZJREFUKM/d0kEKACAIRNHf/S8dSWoz4AVyo4/QRQwrircBLbgkEaRwSAOZc7nqC6FChYr5bb75xS9pCmS29FiyLHWWyGob38gCGXhjiW4AAAAASUVORK5CYII=)}.context-menu ul,.context-menu li{list-style:none;padding:0;margin:0;font-size:13px!important;color:#5b667b!important}.context-menu .list{min-height:23px;padding:2px 0;position:absolute;background-color:#FFF;color:#000}.context-menu .list{border:1px solid #dde0e4;border-radius:5px;box-shadow:0 0 8px #ccc}.context-menu .list li{display:list-item;cursor:default;+width:65px;height:23px;line-height:23px;white-space:nowrap;position:relative;z-index:1;padding:0 27px 0 20px}.context-menu .list .disable,.context-menu .list .disable:hover{color:#c5cbd8!important;background:#FFF;opacity:.8;filter:alpha(opacity=80);-ms-filter:"alpha(Opacity=80)";filter:alpha(Opacity=80)}.context-menu .list li .icon,.context-menu .list li .icon-hover{position:absolute;display:block;width:16px;height:16px;top:3px;left:2px}.context-menu .list li .icon-hover{display:none}.context-menu .list li.list-hover,.context-menu .list .has-more.open{background-color:#4281F4;color:#FFF!important}.context-menu .list li.list-hover>.icon{display:none}.context-menu .list li.list-hover>.icon-hover{display:block}.context-menu .list .has-more{z-index:2}.context-menu .list .has-more .list{display:none;top:-3px;left:98%;z-index:2;border-radius:0;box-shadow:0 0 0}.context-menu .list .separate,.context-menu .list .separate.list-hover{padding:0;margin:5px 0;height:1px;line-height:0;font-size:0!important;background-color:#e9e9e9;cursor:default}.context-menu .list .arrow-down{height:16px;background-position:center -38px}.context-menu .list li:hover{background-color:#4281F4;color:#FFF!important}.context-menu .list li.separate:hover{background-color:#e9e9e9}.context-menu .list .arrow-up{height:16px;background-position:center 4px}',t=document.createElement("style");t.setAttribute("type","text/css"),document.all?t.styleSheet.cssText=e:t.innerHTML=e,document.getElementsByTagName("head").item(0).appendChild(t),l(document.body,"keydown",a.keyBoardHandler,!0),l(document.body,"mousedown",a.hideMenu)},o.fn.rMenu=function(e,t){o(this).each(function(){var n=this.getAttribute("data-cid");if(n&&a.domConf[n]){try{a.domConf[n].parentElement.removeChild(a.domConf[n])}catch(i){}delete a.domConf[n],delete a.eventConf[n],a.keyBoard={}}this.oncontextmenu=function(n){n=void 0===n&&window.event?window.event:n,n.preventDefault?n.preventDefault():n.returnValue=!1,a.contextMenu(n,e,this,t)}})},a.init(),n.exports.bind=function(e,t,n){var i=e.getAttribute("data-cid");if(i&&a.domConf[i]){try{a.domConf[i].parentElement.removeChild(a.domConf[i])}catch(o){}delete a.domConf[i],delete a.eventConf[i],a.keyBoard={}}e.oncontextmenu=function(e){return e=void 0===e&&window.event?window.event:e,e.preventDefault?e.preventDefault():e.returnValue=!1,a.contextMenu(e,t,this,n),e.stopPropagation(),e.cancelable=!0,!1}},n.exports.unbind=function(e){e.oncontextmenu=null}});